<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Post • Secrets Observatory</title>
  <meta name="description" content="Mathematical notes, ethical reflections, and academic insights">
  <meta name="author" content="Secrets Observatory">
  <meta name="robots" content="index, follow">
  
  <!-- Feeds -->
  <link rel="alternate" type="application/atom+xml" title="Secrets Observatory Feed" href="feed.xml">
  
  <script>(function(){const t=localStorage.getItem('theme');const s=matchMedia('(prefers-color-scheme: dark)').matches;if(t==='dark'||(!t&&s))document.documentElement.classList.add('dark');})();</script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config={darkMode:'class'};</script>
  <link rel="stylesheet" href="assets/css/styles.css">
  <!-- MathJax -->
  <script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    svg: {
      fontCache: 'global'
    },
    startup: {
      typeset: false  // Don't typeset on load, we'll call it manually
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      ignoreHtmlClass: 'tex2jax_ignore',
      processHtmlClass: 'tex2jax_process'
    }
  };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head>
<body class="min-h-screen bg-white text-slate-900 dark:bg-slate-900 dark:text-slate-100">
  <header class="border-b border-slate-200 dark:border-slate-800">
    <nav class="mx-auto max-w-3xl px-4 py-4 flex items-center justify-between">
      <a href="index.html" class="font-semibold tracking-tight">Secrets Observatory</a>
      
      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center gap-4 text-sm">
        <a href="index.html" class="hover:underline">Home</a>
        <a href="about.html" class="hover:underline">About</a>
        <div class="relative">
          <button id="catBtn" class="hover:underline">Categories ▾</button>
          <div id="catMenu" class="hidden absolute right-0 mt-2 w-40 rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-800 shadow p-2 text-sm"></div>
        </div>
        <a href="archive.html" class="hover:underline">Archive</a>
        <a href="feedback.html" class="hover:underline">Feedback</a>
        <button id="themeToggle" class="px-2 py-1 border rounded-md border-slate-200 dark:border-slate-700 text-xs">Dark</button>
      </div>

      <!-- Mobile Menu Button -->
      <div class="flex items-center gap-2 md:hidden">
        <button id="themeToggleMobile" class="px-2 py-1 border rounded-md border-slate-200 dark:border-slate-700 text-xs">Dark</button>
        <button id="mobileMenuBtn" class="p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-md" aria-label="Menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </nav>
  </header>

  <!-- Mobile Menu Overlay -->
  <div id="mobileMenuOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden md:hidden"></div>
  
  <!-- Mobile Menu Panel -->
  <div id="mobileMenuPanel" class="fixed top-0 right-0 h-full w-64 bg-white dark:bg-slate-900 shadow-lg z-50 transform translate-x-full transition-transform duration-300 md:hidden">
    <div class="p-4 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center">
      <span class="font-semibold">Menu</span>
      <button id="closeMobileMenu" class="p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-md" aria-label="Close menu">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <nav class="p-4 flex flex-col gap-4 text-base">
      <a href="index.html" class="hover:text-blue-600 dark:hover:text-blue-400 py-2">Home</a>
      <a href="about.html" class="hover:text-blue-600 dark:hover:text-blue-400 py-2">About</a>
      <div>
        <button id="catBtnMobile" class="hover:text-blue-600 dark:hover:text-blue-400 py-2 w-full text-left">Categories ▾</button>
        <div id="catMenuMobile" class="hidden pl-4 mt-2 space-y-2 text-sm"></div>
      </div>
      <a href="archive.html" class="hover:text-blue-600 dark:hover:text-blue-400 py-2">Archive</a>
      <a href="feedback.html" class="hover:text-blue-600 dark:hover:text-blue-400 py-2">Feedback</a>
    </nav>
  </div>

  <main class="mx-auto max-w-3xl px-4 py-8">
    <article>
      <h1 id="postTitle" class="text-2xl font-semibold mb-2"></h1>
      <div id="postMeta" class="text-sm text-slate-500 dark:text-slate-400 mb-4"></div>
      
      <!-- Share and Cite Section - moved to top -->
      <div class="mb-6 pb-4 border-b border-slate-200 dark:border-slate-800">
        <div class="flex gap-4 text-sm">
          <button id="shareBtn" class="text-white dark:text-white hover:underline">Share</button>
          <button id="citeBtn" class="text-white dark:text-white hover:underline">Cite</button>
        </div>
      </div>
      
      <div id="postBody" class="prose dark:prose-invert max-w-none"></div>
      
      <!-- Share Modal -->
      <div id="shareModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4">
          <h3 class="text-lg font-semibold mb-4">Share a link to this post</h3>
          <div class="mb-4">
            <input id="shareUrl" readonly class="w-full px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-md bg-slate-50 dark:bg-slate-900 text-sm" />
          </div>
          <div class="flex justify-between items-center">
            <button id="copyLinkBtn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm">Copy link</button>
            <button id="closeShareModal" class="px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 text-sm">Close</button>
          </div>
        </div>
      </div>
      
      <!-- Cite Modal -->
      <div id="citeModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4">
          <h3 class="text-lg font-semibold mb-4">Example citation:</h3>
          <div class="mb-4">
            <div class="mb-2">
              <input type="radio" id="bibtex" name="citationType" value="bibtex" checked class="mr-2">
              <label for="bibtex" class="text-sm">BibTeX</label>
              <input type="radio" id="amsrefs" name="citationType" value="amsrefs" class="ml-4 mr-2">
              <label for="amsrefs" class="text-sm">amsrefs</label>
            </div>
            <textarea id="citationText" readonly class="w-full h-40 px-3 py-2 border border-slate-200 dark:border-slate-700 rounded-md bg-slate-50 dark:bg-slate-900 text-sm font-mono"></textarea>
          </div>
          <div class="flex justify-between items-center">
            <button id="copyCitationBtn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm">Copy citation</button>
            <button id="closeCiteModal" class="px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 text-sm">Close</button>
          </div>
        </div>
      </div>
    </article>
    <nav class="mt-8 flex justify-between text-sm">
      <a id="prevLink" class="hover:underline"></a>
      <a id="nextLink" class="hover:underline"></a>
    </nav>
  </main>

  <footer class="border-t border-slate-200 dark:border-slate-800">
    <div class="mx-auto max-w-3xl px-4 py-6 text-sm text-slate-500 dark:text-slate-400 text-center">
      © <span id="year"></span> Secrets Observatory • Content under CC BY-NC-ND 4.0
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="references.js"></script>
  <script src="site.js"></script>
  
  <!-- Umami Analytics -->
  <script defer src="https://cloud.umami.is/script.js" data-website-id="6f1380e5-709c-4217-bed4-2572a873996c"></script>
</body>
</html>